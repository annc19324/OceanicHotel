jsp admin

add_room.jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="java.util.List" %>
<%@ page import="com.mycompany.oceanichotel.models.RoomType" %>
<%
    String language = (String) session.getAttribute("language");
    if (language == null) {
        language = "en";
        session.setAttribute("language", language);
    }
    String theme = (String) session.getAttribute("theme");
    if (theme == null) {
        theme = "light";
        session.setAttribute("theme", theme);
    }
    String error = (String) request.getAttribute("error");
    List<RoomType> roomTypes = (List<RoomType>) request.getAttribute("roomTypes");
%>
<!DOCTYPE html>
<html lang="<%= language%>">
    <head>
        <meta charset="UTF-8">
        <title><%= language.equals("vi") ? "Thêm phòng - Khách sạn Oceanic" : "Add Room - Oceanic Hotel"%></title>
        <link rel="icon" href="<%= request.getContextPath()%>/assets/images/logo.png" type="image/x-icon">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/main.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/form.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/modal.css">
    </head>
    <body class="<%= theme.equals("dark") ? "dark-mode" : ""%>" data-theme="<%= theme%>">
        <div class="admin-container">
            <nav class="sidebar">
                <div class="sidebar-header">
                    <a style="color: white; margin-bottom: 20px; font-size: 24px; font-weight: 600; letter-spacing: 0.5px;" href="<%= request.getContextPath()%>/admin/dashboard">Oceanic Hotel</a>
                </div>
                <ul>
                    <li><a href="<%= request.getContextPath()%>/admin/dashboard"><%= language.equals("vi") ? "Tổng quan" : "Dashboard"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/users"><%= language.equals("vi") ? "Quản lý người dùng" : "User Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/room-types"><%= language.equals("vi") ? "Quản lý loại phòng" : "Room Type Management"%></a></li>
                    <li class="active"><a href="<%= request.getContextPath()%>/admin/rooms"><%= language.equals("vi") ? "Quản lý phòng" : "Room Management"%></a></li>

                    <li><a href="<%= request.getContextPath()%>/admin/bookings"><%= language.equals("vi") ? "Quản lý đặt phòng" : "Booking Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/transactions"><%= language.equals("vi") ? "Quản lý giao dịch" : "Transaction Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/settings"><%= language.equals("vi") ? "Cấu hình hệ thống" : "System Settings"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/reports"><%= language.equals("vi") ? "Báo cáo" : "Reports"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/logout"><%= language.equals("vi") ? "Đăng xuất" : "Logout"%></a></li>
                </ul>
            </nav>
            <div class="main-content">
                <form action="<%= request.getContextPath()%>/admin/rooms/add" method="POST">
                    <div class="form-group">
                        <label for="roomNumber"><%= language.equals("vi") ? "Số phòng" : "Room Number"%></label>
                        <input type="text" id="roomNumber" name="roomNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="typeId"><%= language.equals("vi") ? "Loại phòng" : "Room Type"%></label>
                        <select id="typeId" name="typeId" required onchange="updatePrice()">
                            <% for (RoomType roomType : roomTypes) {%>
                            <option value="<%= roomType.getTypeId()%>"><%= roomType.getTypeName()%></option>
                            <% }%>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="pricePerNight"><%= language.equals("vi") ? "Giá mỗi đêm" : "Price per Night"%></label>
                        <input type="number" id="pricePerNight" name="pricePerNight" step="0.01" required value="150000">
                    </div>
                    <div class="form-group">
                        <label for="maxAdults"><%= language.equals("vi") ? "Số người lớn tối đa" : "Max Adults"%></label>
                        <input type="number" id="maxAdults" name="maxAdults" min="1" value="1" required>
                    </div>
                    <div class="form-group">
                        <label for="maxChildren"><%= language.equals("vi") ? "Số trẻ em tối đa" : "Max Children"%></label>
                        <input type="number" id="maxChildren" name="maxChildren" min="0" value="0" required>
                    </div>
                    <div class="form-group">
                        <label for="isAvailable"><%= language.equals("vi") ? "Trạng thái" : "Available"%></label>
                        <input type="checkbox" id="isAvailable" name="isAvailable" value="true" checked>
                    </div>
                    <div class="form-group">
                        <label for="description"><%= language.equals("vi") ? "Mô tả" : "Description"%></label>
                        <textarea id="description" name="description"></textarea>
                    </div>
                    <div class="form-buttons">
                        <button type="submit" class="action-btn add-btn"><%= language.equals("vi") ? "Thêm" : "Add"%></button>
                        <a href="<%= request.getContextPath()%>/admin/rooms" class="action-btn cancel-btn"><%= language.equals("vi") ? "Hủy" : "Cancel"%></a>
                    </div>
                </form>
                <% if (error != null) {%>
                <div class="custom-modal" id="errorModal" style="display: flex;">
                    <div class="modal-content animate-modal">
                        <h3><%= language.equals("vi") ? "Lỗi" : "Error"%></h3>
                        <p><%= error%></p>
                        <div class="modal-buttons">
                            <button class="modal-btn cancel-btn" onclick="document.getElementById('errorModal').style.display = 'none'">
                                <%= language.equals("vi") ? "Đóng" : "Close"%>
                            </button>
                        </div>
                    </div>
                </div>
                <% }%>
            </div>
        </div>
        <script>
            function updatePrice() {
                const typeId = document.getElementById('typeId').value;
                const priceInput = document.getElementById('pricePerNight');
                const maxAdultsInput = document.getElementById('maxAdults');
                const maxChildrenInput = document.getElementById('maxChildren');

                const roomTypes = {
            <% for (RoomType roomType : roomTypes) {%>
                    '<%= roomType.getTypeId()%>': {
                        price: <%= roomType.getDefaultPrice()%>,
                                maxAdults: <%= roomType.getMaxAdults()%>,
                        maxChildren: <%= roomType.getMaxChildren()%>
                    },
            <% }%>
                };

                const selectedType = roomTypes[typeId];
                if (selectedType) {
                    priceInput.value = selectedType.price;
                    maxAdultsInput.value = selectedType.maxAdults;
                    maxChildrenInput.value = selectedType.maxChildren;
                }
            }


            window.onload = function () {
                updatePrice();
            };
        </script>
    </body>
</html>

add_room_type.jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%
    String language = (String) session.getAttribute("language");
    if (language == null) {
        language = "en";
        session.setAttribute("language", language);
    }
    String theme = (String) session.getAttribute("theme");
    if (theme == null) {
        theme = "light";
        session.setAttribute("theme", theme);
    }
    String error = (String) request.getAttribute("error");
%>
<!DOCTYPE html>
<html lang="<%= language%>">
    <head>
        <meta charset="UTF-8">
        <title><%= language.equals("vi") ? "Thêm loại phòng - Khách sạn Oceanic" : "Add Room Type - Oceanic Hotel"%></title>
        <link rel="icon" href="<%= request.getContextPath()%>/assets/images/logo.png" type="image/x-icon">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/main.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/form.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/modal.css">
    </head>
    <body class="<%= theme.equals("dark") ? "dark-mode" : ""%>" data-theme="<%= theme%>">
        <div class="admin-container">
            <nav class="sidebar">
                <div class="sidebar-header">
                    <a style="color: white; margin-bottom: 20px; font-size: 24px; font-weight: 600; letter-spacing: 0.5px;" href="<%= request.getContextPath()%>/admin/dashboard">Oceanic Hotel</a>
                </div>
                <ul>
                    <li><a href="<%= request.getContextPath()%>/admin/dashboard"><%= language.equals("vi") ? "Tổng quan" : "Dashboard"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/users"><%= language.equals("vi") ? "Quản lý người dùng" : "User Management"%></a></li>
                    <li class="active"><a href="<%= request.getContextPath()%>/admin/room-types" ><%= language.equals("vi") ? "Quản lý loại phòng" : "Room Type Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/rooms"><%= language.equals("vi") ? "Quản lý phòng" : "Room Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/bookings"><%= language.equals("vi") ? "Quản lý đặt phòng" : "Booking Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/transactions"><%= language.equals("vi") ? "Quản lý giao dịch" : "Transaction Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/settings"><%= language.equals("vi") ? "Cấu hình hệ thống" : "System Settings"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/reports"><%= language.equals("vi") ? "Báo cáo" : "Reports"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/logout"><%= language.equals("vi") ? "Đăng xuất" : "Logout"%></a></li>
                </ul>
            </nav>
            <div class="main-content">
                <form action="<%= request.getContextPath()%>/admin/room-types/add" method="POST" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="typeName"><%= language.equals("vi") ? "Tên loại phòng" : "Type Name"%></label>
                        <input type="text" id="typeName" name="typeName" required>
                    </div>
                    <div class="form-group">
                        <label for="defaultPrice"><%= language.equals("vi") ? "Giá mặc định mỗi đêm" : "Default Price per Night"%></label>
                        <input type="number" id="defaultPrice" name="defaultPrice" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="maxAdults"><%= language.equals("vi") ? "Số người lớn tối đa" : "Max Adults"%></label>
                        <input type="number" id="maxAdults" name="maxAdults" min="1" value="1" required>
                    </div>
                    <div class="form-group">
                        <label for="maxChildren"><%= language.equals("vi") ? "Số trẻ em tối đa" : "Max Children"%></label>
                        <input type="number" id="maxChildren" name="maxChildren" min="0" value="0" required>
                    </div>
                    <div class="form-group">
                        <label for="images"><%= language.equals("vi") ? "Hình ảnh" : "Images"%></label>
                        <input type="file" id="images" name="images" accept="image/*" multiple>
                    </div>
                    <div class="form-group">
                        <label for="description"><%= language.equals("vi") ? "Mô tả" : "Description"%></label>
                        <textarea id="description" name="description"></textarea>
                    </div>
                    <div class="form-buttons">
                        <button type="submit" class="action-btn add-btn"><%= language.equals("vi") ? "Thêm" : "Add"%></button>
                        <a href="<%= request.getContextPath()%>/admin/room-types" class="action-btn cancel-btn"><%= language.equals("vi") ? "Hủy" : "Cancel"%></a>
                    </div>
                </form>
                <% if (error != null) {%>
                <div class="custom-modal" id="errorModal" style="display: flex;">
                    <div class="modal-content animate-modal">
                        <h3><%= language.equals("vi") ? "Lỗi" : "Error"%></h3>
                        <p><%= error%></p>
                        <div class="modal-buttons">
                            <button class="modal-btn cancel-btn" onclick="document.getElementById('errorModal').style.display = 'none'">
                                <%= language.equals("vi") ? "Đóng" : "Close"%>
                            </button>
                        </div>
                    </div>
                </div>
                <% }%>
            </div>
        </div>
    </body>
</html>

add_user.jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%
    String language = (String) session.getAttribute("language");
    if (language == null) {
        language = "en";
        session.setAttribute("language", language);
    }
    String theme = (String) session.getAttribute("theme");
    if (theme == null) {
        theme = "light";
        session.setAttribute("theme", theme);
    }
    String error = (String) request.getAttribute("error");
%>
<!DOCTYPE html>
<html lang="<%= language%>">
    <head>
        <meta charset="UTF-8">
        <title><%= language.equals("vi") ? "Thêm người dùng - Khách sạn Oceanic" : "Add User - Oceanic Hotel"%></title>
        <link rel="icon" href="<%= request.getContextPath()%>/assets/images/logo.png" type="image/x-icon">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/main.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/form.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/modal.css">
    </head>
    <body class="<%= theme.equals("dark") ? "dark-mode" : ""%>" data-theme="<%= theme%>">
        <div class="admin-container">
            <nav class="sidebar">
                <div class="sidebar-header">
                    <a style="color: white; margin-bottom: 20px; font-size: 24px; font-weight: 600; letter-spacing: 0.5px;" href="<%= request.getContextPath()%>/admin/dashboard">Oceanic Hotel
                    </a>
                </div>
                <ul>
                    <li><a href="<%= request.getContextPath()%>/admin/dashboard"><%= language.equals("vi") ? "Tổng quan" : "Dashboard"%></a></li>
                    <li class="active"><a href="<%= request.getContextPath()%>/admin/users"><%= language.equals("vi") ? "Quản lý người dùng" : "User Management"%></a></li>
                    <li ><a href="<%= request.getContextPath()%>/admin/room-types"><%= language.equals("vi") ? "Quản lý loại phòng" : "Room Type Management"%></a></li>

                    <li><a href="<%= request.getContextPath()%>/admin/rooms"><%= language.equals("vi") ? "Quản lý phòng" : "Room Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/bookings"><%= language.equals("vi") ? "Quản lý đặt phòng" : "Booking Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/transactions"><%= language.equals("vi") ? "Quản lý giao dịch" : "Transaction Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/settings"><%= language.equals("vi") ? "Cấu hình hệ thống" : "System Settings"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/reports"><%= language.equals("vi") ? "Báo cáo" : "Reports"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/logout"><%= language.equals("vi") ? "Đăng xuất" : "Logout"%></a></li>
                </ul>
            </nav>
            <div class="main-content">

                <form action="<%= request.getContextPath()%>/admin/users/add" method="POST">
                    <div class="form-group">
                        <label for="username"><%= language.equals("vi") ? "Tên người dùng" : "Username"%></label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="email"><%= language.equals("vi") ? "Email" : "Email"%></label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="password"><%= language.equals("vi") ? "Mật khẩu" : "Password"%></label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <div class="form-group">
                        <label for="role"><%= language.equals("vi") ? "Vai trò" : "Role"%></label>
                        <select id="role" name="role" required>
                            <option value="admin"><%= language.equals("vi") ? "Quản trị viên" : "admin"%></option>
                            <option value="user"><%= language.equals("vi") ? "Người dùng" : "user"%></option>
                        </select>
                    </div>
                    <div class="form-buttons">
                        <button type="submit" class="action-btn add-btn"><%= language.equals("vi") ? "Thêm" : "Add"%></button>
                        <a href="<%= request.getContextPath()%>/admin/users" class="action-btn cancel-btn"><%= language.equals("vi") ? "Hủy" : "Cancel"%></a>
                    </div>
                </form>
                <% if (error != null) {%>
                <div class="custom-modal" id="errorModal" style="display: flex;">
                    <div class="modal-content animate-modal">
                        <h3><%= language.equals("vi") ? "Lỗi" : "Error"%></h3>
                        <p><%= error%></p>
                        <div class="modal-buttons">
                            <button class="modal-btn cancel-btn" onclick="document.getElementById('errorModal').style.display = 'none'">
                                <%= language.equals("vi") ? "Đóng" : "Close"%>
                            </button>
                        </div>
                    </div>
                </div>
                <% }%>
            </div>
        </div>
        <script>
            function changeLanguage() {
                const language = document.getElementById('languageSelect').value;
                fetch('<%= request.getContextPath()%>/language', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'language=' + encodeURIComponent(language)
                }).then(() => location.reload());
            }

            function changeTheme() {
                const theme = document.getElementById('themeSelect').value;
                fetch('<%= request.getContextPath()%>/theme', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'theme=' + encodeURIComponent(theme)
                }).then(() => {
                    document.body.className = theme === 'dark' ? 'dark-mode' : '';
                    document.body.setAttribute('data-theme', theme);
                });
            }
        </script>
    </body>
</html>

bookings.jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="java.util.List" %>
<%@ page import="com.mycompany.oceanichotel.models.Booking" %>
<%
    String language = (String) session.getAttribute("language");
    if (language == null) {
        language = "en";
        session.setAttribute("language", language);
    }
    String theme = (String) session.getAttribute("theme");
    if (theme == null) {
        theme = "light";
        session.setAttribute("theme", theme);
    }
    int currentPage = request.getAttribute("currentPage") != null ? (Integer) request.getAttribute("currentPage") : 1;
    int totalPages = request.getAttribute("totalPages") != null ? (Integer) request.getAttribute("totalPages") : 1;
%>
<!DOCTYPE html>
<html lang="<%= language%>">
    <head>
        <meta charset="UTF-8">
        <title><%= language.equals("vi") ? "Quản lý đặt phòng - Khách sạn Oceanic" : "Booking Management - Oceanic Hotel"%></title>
        <link rel="icon" href="<%= request.getContextPath()%>/assets/images/logo.png" type="image/x-icon">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/main.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/sidebar.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/table.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/modal.css">

    </head>
    <body class="<%= theme.equals("dark") ? "dark-mode" : ""%>" data-theme="<%= theme%>">
        <div class="admin-container">
            <nav class="sidebar">
                <div class="sidebar-header">
                    <a style="color: white; margin-bottom: 20px; font-size: 24px; font-weight: 600; letter-spacing: 0.5px;" href="<%= request.getContextPath()%>/admin/dashboard">Oceanic Hotel
                    </a>
                </div>
                <ul>
                    <li><a href="<%= request.getContextPath()%>/admin/dashboard"><%= language.equals("vi") ? "Tổng quan" : "Dashboard"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/users"><%= language.equals("vi") ? "Quản lý người dùng" : "User Management"%></a></li>
                    <li ><a href="<%= request.getContextPath()%>/admin/room-types"><%= language.equals("vi") ? "Quản lý loại phòng" : "Room Type Management"%></a></li>

                    <li><a href="<%= request.getContextPath()%>/admin/rooms"><%= language.equals("vi") ? "Quản lý phòng" : "Room Management"%></a></li>
                    <li class="active"><a href="<%= request.getContextPath()%>/admin/bookings"><%= language.equals("vi") ? "Quản lý đặt phòng" : "Booking Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/transactions"><%= language.equals("vi") ? "Quản lý giao dịch" : "Transaction Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/settings"><%= language.equals("vi") ? "Cấu hình hệ thống" : "System Settings"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/reports"><%= language.equals("vi") ? "Báo cáo" : "Reports"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/logout"><%= language.equals("vi") ? "Đăng xuất" : "Logout"%></a></li>
                </ul>
            </nav>
            <div class="main-content">

                <div class="table-header">
                    <div class="search">
                        <form action="<%= request.getContextPath()%>/admin/bookings" method="GET">
                            <input type="text" name="search" placeholder="<%= language.equals("vi") ? "Tìm kiếm theo ID đặt phòng" : "Search by Booking ID"%>"
                                   value="<%= request.getParameter("search") != null ? request.getParameter("search") : ""%>">
                            <button type="submit" style="display: none;"></button>
                        </form>
                    </div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th><%= language.equals("vi") ? "ID" : "ID"%></th>
                            <th><%= language.equals("vi") ? "Người dùng" : "User"%></th>
                            <th><%= language.equals("vi") ? "Phòng" : "Room"%></th>
                            <th><%= language.equals("vi") ? "Ngày nhận" : "Check-in"%></th>
                            <th><%= language.equals("vi") ? "Ngày trả" : "Check-out"%></th>
                            <th><%= language.equals("vi") ? "Tổng tiền" : "Total Price"%></th>
                            <th><%= language.equals("vi") ? "Trạng thái" : "Status"%></th>
                            <th>...</th>
                        </tr>
                    </thead>
                    <tbody>
                        <%
                            List<Booking> bookings = (List<Booking>) request.getAttribute("bookings");
                            if (bookings != null) {
                                for (Booking booking : bookings) {
                        %>
                        <tr>
                            <td><%= booking.getBookingId()%></td>
                            <td><%= booking.getUserId()%></td>
                            <td><%= booking.getRoomId()%></td>
                            <td><%= booking.getCheckInDate()%></td>
                            <td><%= booking.getCheckOutDate()%></td>
                            <%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
                            <td><fmt:formatNumber value="<%= booking.getTotalPrice()%>" type="number" minFractionDigits="0" maxFractionDigits="2"/> VND</td>
                            <td><span class="status <%= booking.getStatus().toLowerCase()%>">
                                    <%= language.equals("vi")
                                            ? (booking.getStatus().equals("Pending") ? "Đang chờ"
                                            : booking.getStatus().equals("Confirmed") ? "Đã xác nhận" : "Đã hủy")
                                    : booking.getStatus()%>
                                </span></td>
                            <td>
                                <div class="dropdown">
                                    <button class="dropdown-btn">⋮</button>
                                    <div class="dropdown-content">
                                        <a href="javascript:void(0)" onclick="updateStatus('<%= booking.getBookingId()%>', 'Confirmed')">
                                            <%= language.equals("vi") ? "Xác nhận" : "Confirm"%>
                                        </a>
                                        <a href="javascript:void(0)" onclick="updateStatus('<%= booking.getBookingId()%>', 'Cancelled')">
                                            <%= language.equals("vi") ? "Hủy" : "Cancel"%>
                                        </a>
                                        <a href="<%= request.getContextPath()%>/admin/bookings/history?bookingId=<%= booking.getBookingId()%>">
                                            <%= language.equals("vi") ? "Xem lịch sử" : "View History"%>
                                        </a>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <%
                                }
                            }
                        %>
                    </tbody>
                </table>
                <% if (totalPages > 1) { %>
                <div class="pagination">
                    <% if (currentPage > 1) {%>
                    <a href="<%= request.getContextPath()%>/admin/bookings?page=<%= currentPage - 1%><%= request.getParameter("search") != null ? "&search=" + request.getParameter("search") : ""%>">
                        <button class="page-btn">Previous</button>
                    </a>
                    <% } %>
                    <% for (int i = 1; i <= totalPages; i++) {%>
                    <a href="<%= request.getContextPath()%>/admin/bookings?page=<%= i%><%= request.getParameter("search") != null ? "&search=" + request.getParameter("search") : ""%>">
                        <button class="page-btn <%= currentPage == i ? "active" : ""%>"><%= i%></button>
                    </a>
                    <% } %>
                    <% if (currentPage < totalPages) {%>
                    <a href="<%= request.getContextPath()%>/admin/bookings?page=<%= currentPage + 1%><%= request.getParameter("search") != null ? "&search=" + request.getParameter("search") : ""%>">
                        <button class="page-btn">Next</button>
                    </a>
                    <% } %>
                </div>
                <% }%>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                document.querySelectorAll('.dropdown-btn').forEach(btn => {
                    btn.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        const dropdownContent = this.nextElementSibling;
                        const isVisible = dropdownContent.style.display === 'block';
                        document.querySelectorAll('.dropdown-content').forEach(content => content.style.display = 'none');
                        dropdownContent.style.display = isVisible ? 'none' : 'block';
                    });
                });
                document.addEventListener('click', function (e) {
                    if (!e.target.closest('.dropdown')) {
                        document.querySelectorAll('.dropdown-content').forEach(content => content.style.display = 'none');
                    }
                });
            });

            function updateStatus(bookingId, status) {
                const lang = '<%= language%>';
                const message = lang === 'vi' ? (status === 'Confirmed' ? 'Bạn có chắc chắn muốn xác nhận đặt phòng này không?' : 'Bạn có chắc chắn muốn hủy đặt phòng này không?')
                        : `Are you sure you want to ${status.toLowerCase()} this booking?`;
                if (confirm(message)) {
                    const form = document.createElement('form');
                    form.method = 'POST';
                    form.action = '<%= request.getContextPath()%>/admin/bookings/update';
                    form.innerHTML = `<input type="hidden" name="bookingId" value="${bookingId}">
                              <input type="hidden" name="status" value="${status}">`;
                    document.body.appendChild(form);
                    form.submit();
                }
            }

            function changeLanguage() {
                fetch('<%= request.getContextPath()%>/language', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'language=' + encodeURIComponent(document.getElementById('languageSelect').value)
                }).then(() => location.reload());
            }

            function changeTheme() {
                const theme = document.getElementById('themeSelect').value;
                fetch('<%= request.getContextPath()%>/theme', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'theme=' + encodeURIComponent(theme)
                }).then(() => {
                    document.body.className = theme === 'dark' ? 'dark-mode' : '';
                    document.body.setAttribute('data-theme', theme);
                });
            }
        </script>
    </body>
</html>

dashboard.jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<% 
    String language = (String) session.getAttribute("language");
    if (language == null) {
        language = "en";
        session.setAttribute("language", language);
    }
    String theme = (String) session.getAttribute("theme");
    if (theme == null) {
        theme = "light";
        session.setAttribute("theme", theme);
    }
    int checkInToday = (Integer) request.getAttribute("checkInToday") != null ? (Integer) request.getAttribute("checkInToday") : 0;
    int checkOutToday = (Integer) request.getAttribute("checkOutToday") != null ? (Integer) request.getAttribute("checkOutToday") : 0;
    int totalInHotel = (Integer) request.getAttribute("totalInHotel") != null ? (Integer) request.getAttribute("totalInHotel") : 0;
    int availableRooms = (Integer) request.getAttribute("availableRooms") != null ? (Integer) request.getAttribute("availableRooms") : 0;
    int occupiedRooms = (Integer) request.getAttribute("occupiedRooms") != null ? (Integer) request.getAttribute("occupiedRooms") : 0;
%>
<!DOCTYPE html>
<html lang="<%= language %>">
<head>
    <meta charset="UTF-8">
    <title><%= language.equals("vi") ? "Bảng điều khiển Quản trị - Khách sạn Oceanic" : "Admin Dashboard - Oceanic Hotel" %></title>
    <link rel="icon" href="<%= request.getContextPath() %>/assets/images/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="<%= request.getContextPath() %>/assets/css/main.css">
    <link rel="stylesheet" href="<%= request.getContextPath() %>/assets/css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="<%= theme.equals("dark") ? "dark-mode" : "" %>" data-theme="<%= theme %>">
    <div class="admin-container">
        <nav class="sidebar">
                <div class="sidebar-header">
                    <a style="color: white; margin-bottom: 20px; font-size: 24px; font-weight: 600; letter-spacing: 0.5px;" href="<%= request.getContextPath()%>/admin/dashboard">Oceanic Hotel
                    </a>
                </div>
            <ul>
                <li class="active"><a href="<%= request.getContextPath() %>/admin/dashboard"><%= language.equals("vi") ? "Tổng quan" : "Dashboard" %></a></li>
                <li><a href="<%= request.getContextPath() %>/admin/users"><%= language.equals("vi") ? "Quản lý người dùng" : "User Management" %></a></li>
                 <li><a href="<%= request.getContextPath() %>/admin/room-types" class="active"><%= language.equals("vi") ? "Quản lý loại phòng" : "Room Type Management" %></a></li>
                <li><a href="<%= request.getContextPath() %>/admin/rooms"><%= language.equals("vi") ? "Quản lý phòng" : "Room Management" %></a></li>
                <li><a href="<%= request.getContextPath() %>/admin/bookings"><%= language.equals("vi") ? "Quản lý đặt phòng" : "Booking Management" %></a></li>
                <li><a href="<%= request.getContextPath() %>/admin/transactions"><%= language.equals("vi") ? "Quản lý giao dịch" : "Transaction Management" %></a></li>
                <li><a href="<%= request.getContextPath() %>/admin/settings"><%= language.equals("vi") ? "Cấu hình hệ thống" : "System Settings" %></a></li>
                <li><a href="<%= request.getContextPath() %>/admin/reports"><%= language.equals("vi") ? "Báo cáo" : "Reports" %></a></li>
                <li><a href="<%= request.getContextPath() %>/logout"><%= language.equals("vi") ? "Đăng xuất" : "Logout" %></a></li>
            </ul>
        </nav>
        <div class="main-content">

            <div class="overview">
                <div class="card">
                    <h4><%= language.equals("vi") ? "Check-in hôm nay" : "Today's Check-in" %></h4>
                    <p><%= checkInToday %></p>
                </div>
                <div class="card">
                    <h4><%= language.equals("vi") ? "Check-out hôm nay" : "Today's Check-out" %></h4>
                    <p><%= checkOutToday %></p>
                </div>
                <div class="card">
                    <h4><%= language.equals("vi") ? "Tổng số khách trong khách sạn" : "Total In Hotel" %></h4>
                    <p><%= totalInHotel %></p>
                </div>
                <div class="card">
                    <h4><%= language.equals("vi") ? "Phòng trống" : "Available Rooms" %></h4>
                    <p><%= availableRooms %></p>
                </div>
                <div class="card">
                    <h4><%= language.equals("vi") ? "Phòng đã đặt" : "Occupied Rooms" %></h4>
                    <p><%= occupiedRooms %></p>
                </div>
            </div>
            <div class="chart-container" style="margin-top: 20px; width: 500px">
                <canvas id="roomStatusChart" width="400" height="200"></canvas>
            </div>
                
        </div>
    </div>
    <script>
        const ctx = document.getElementById('roomStatusChart').getContext('2d');
        const roomStatusChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['<%= language.equals("vi") ? "Phòng trống" : "Available Rooms" %>', '<%= language.equals("vi") ? "Phòng đã đặt" : "Occupied Rooms" %>'],
                datasets: [{
                    data: [<%= availableRooms %>, <%= occupiedRooms %>],
                    backgroundColor: ['#28a745', '#dc3545'],
                    borderColor: ['#fff', '#fff'],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'top' },
                    title: { display: true, text: '<%= language.equals("vi") ? "Trạng thái phòng" : "Room Status" %>' }
                }
            }
        });

        function changeLanguage() {
            const language = document.getElementById('languageSelect').value;
            fetch('<%= request.getContextPath() %>/language', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: 'language=' + encodeURIComponent(language)
            }).then(() => location.reload());
        }

        function changeTheme() {
            const theme = document.getElementById('themeSelect').value;
            fetch('<%= request.getContextPath() %>/theme', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: 'theme=' + encodeURIComponent(theme)
            }).then(() => {
                document.body.className = theme === 'dark' ? 'dark-mode' : '';
                document.body.setAttribute('data-theme', theme);
            });
        }
    </script>
</body>
</html>

edit_room.jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="com.mycompany.oceanichotel.models.Room" %>
<%@ page import="com.mycompany.oceanichotel.models.RoomType" %>
<%@ page import="java.util.List" %>
<%
    String language = (String) session.getAttribute("language");
    if (language == null) {
        language = "en";
        session.setAttribute("language", language);
    }
    String theme = (String) session.getAttribute("theme");
    if (theme == null) {
        theme = "light";
        session.setAttribute("theme", theme);
    }
    Room room = (Room) request.getAttribute("room");
    List<RoomType> roomTypes = (List<RoomType>) request.getAttribute("roomTypes");
    String error = (String) request.getAttribute("error");
%>
<!DOCTYPE html>
<html lang="<%= language%>">
<head>
    <meta charset="UTF-8">
    <title><%= language.equals("vi") ? "Sửa phòng - Khách sạn Oceanic" : "Edit Room - Oceanic Hotel"%></title>
    <link rel="icon" href="<%= request.getContextPath()%>/assets/images/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/main.css">
    <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/form.css">
    <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/modal.css">
</head>
<body class="<%= theme.equals("dark") ? "dark-mode" : ""%>" data-theme="<%= theme%>">
<div class="admin-container">
    <nav class="sidebar">
        <div class="sidebar-header">
            <a style="color: white; margin-bottom: 20px; font-size: 24px; font-weight: 600; letter-spacing: 0.5px;" href="<%= request.getContextPath()%>/admin/dashboard">Oceanic Hotel</a>
        </div>
        <ul>
            <li><a href="<%= request.getContextPath()%>/admin/dashboard"><%= language.equals("vi") ? "Tổng quan" : "Dashboard"%></a></li>
            <li><a href="<%= request.getContextPath()%>/admin/users"><%= language.equals("vi") ? "Quản lý người dùng" : "User Management"%></a></li>
            <li><a href="<%= request.getContextPath()%>/admin/room-types"><%= language.equals("vi") ? "Quản lý loại phòng" : "Room Type Management"%></a></li>
            <li class="active"><a href="<%= request.getContextPath()%>/admin/rooms"><%= language.equals("vi") ? "Quản lý phòng" : "Room Management"%></a></li>
            <li><a href="<%= request.getContextPath()%>/admin/bookings"><%= language.equals("vi") ? "Quản lý đặt phòng" : "Booking Management"%></a></li>
            <li><a href="<%= request.getContextPath()%>/admin/transactions"><%= language.equals("vi") ? "Quản lý giao dịch" : "Transaction Management"%></a></li>
            <li><a href="<%= request.getContextPath()%>/admin/settings"><%= language.equals("vi") ? "Cấu hình hệ thống" : "System Settings"%></a></li>
            <li><a href="<%= request.getContextPath()%>/admin/reports"><%= language.equals("vi") ? "Báo cáo" : "Reports"%></a></li>
            <li><a href="<%= request.getContextPath()%>/logout"><%= language.equals("vi") ? "Đăng xuất" : "Logout"%></a></li>
        </ul>
    </nav>
    <div class="main-content">
        <% if (room == null) { %>
            <p><%= language.equals("vi") ? "Không tìm thấy phòng để chỉnh sửa." : "No room found to edit." %></p>
            <a href="<%= request.getContextPath()%>/admin/rooms" class="action-btn cancel-btn"><%= language.equals("vi") ? "Quay lại" : "Back"%></a>
        <% } else { %>
            <form action="<%= request.getContextPath()%>/admin/rooms/update" method="POST">
                <input type="hidden" name="roomId" value="<%= room.getRoomId() %>">
                <div class="form-group">
                    <label for="roomNumber"><%= language.equals("vi") ? "Số phòng" : "Room Number"%></label>
                    <input type="text" id="roomNumber" name="roomNumber" value="<%= room.getRoomNumber() %>" required>
                </div>
                <div class="form-group">
                    <label for="typeId"><%= language.equals("vi") ? "Loại phòng" : "Room Type"%></label>
                    <select id="typeId" name="typeId" required onchange="updatePrice()">
                        <% for (RoomType roomType : roomTypes) { %>
                            <option value="<%= roomType.getTypeId() %>" <%= room.getRoomType() != null && room.getRoomType().getTypeId() == roomType.getTypeId() ? "selected" : "" %>>
                                <%= roomType.getTypeName() %>
                            </option>
                        <% } %>
                    </select>
                </div>
                <div class="form-group">
                    <label for="pricePerNight"><%= language.equals("vi") ? "Giá mỗi đêm" : "Price per Night"%></label>
                    <input type="number" id="pricePerNight" name="pricePerNight" step="0.01" value="<%= room.getPricePerNight() %>" required>
                </div>
                <div class="form-group">
                    <label for="maxAdults"><%= language.equals("vi") ? "Số người lớn tối đa" : "Max Adults"%></label>
                    <input type="number" id="maxAdults" name="maxAdults" min="1" value="<%= room.getMaxAdults() %>" required>
                </div>
                <div class="form-group">
                    <label for="maxChildren"><%= language.equals("vi") ? "Số trẻ em tối đa" : "Max Children"%></label>
                    <input type="number" id="maxChildren" name="maxChildren" min="0" value="<%= room.getMaxChildren() %>" required>
                </div>
                <div class="form-group">
                    <label for="isAvailable"><%= language.equals("vi") ? "Trạng thái" : "Available"%></label>
                    <input type="checkbox" id="isAvailable" name="isAvailable" value="true" <%= room.isAvailable() ? "checked" : "" %>>
                </div>
                <div class="form-group">
                    <label for="description"><%= language.equals("vi") ? "Mô tả" : "Description"%></label>
                    <textarea id="description" name="description"><%= room.getDescription() != null ? room.getDescription() : "" %></textarea>
                </div>
                <div class="form-buttons">
                    <button type="submit" class="action-btn add-btn"><%= language.equals("vi") ? "Cập nhật" : "Update"%></button>
                    <a href="<%= request.getContextPath()%>/admin/rooms" class="action-btn cancel-btn"><%= language.equals("vi") ? "Hủy" : "Cancel"%></a>
                </div>
            </form>
        <% } %>
        <% if (error != null) { %>
            <div class="custom-modal" id="errorModal" style="display: flex;">
                <div class="modal-content animate-modal">
                    <h3><%= language.equals("vi") ? "Lỗi" : "Error"%></h3>
                    <p><%= error %></p>
                    <div class="modal-buttons">
                        <button class="modal-btn cancel-btn" onclick="document.getElementById('errorModal').style.display = 'none'">
                            <%= language.equals("vi") ? "Đóng" : "Close"%>
                        </button>
                    </div>
                </div>
            </div>
        <% } %>
    </div>
</div>
<script>
    function updatePrice() {
        const typeId = document.getElementById('typeId')?.value;
        const priceInput = document.getElementById('pricePerNight');
        const maxAdultsInput = document.getElementById('maxAdults');
        const maxChildrenInput = document.getElementById('maxChildren');

        const roomTypes = {
            <% for (RoomType roomType : roomTypes) { %>
                '<%= roomType.getTypeId() %>': { price: <%= roomType.getDefaultPrice() %>, maxAdults: <%= roomType.getMaxAdults() %>, maxChildren: <%= roomType.getMaxChildren() %> },
            <% } %>
        };

        const selectedType = roomTypes[typeId];
        if (selectedType) {
            priceInput.value = selectedType.price;
            maxAdultsInput.value = selectedType.maxAdults;
            maxChildrenInput.value = selectedType.maxChildren;
        }
    }

    window.onload = function () {
        if (document.getElementById('typeId')) {
            updatePrice();
        }
    };
</script>
</body>
</html>

edit_room_type.jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="com.mycompany.oceanichotel.models.RoomType" %>
<%@ page import="com.mycompany.oceanichotel.models.RoomTypeImage" %>
<%@ page import="java.util.List" %>
<%@ page import="java.io.File" %>
<%
    String language = (String) session.getAttribute("language");
    if (language == null) {
        language = "en";
        session.setAttribute("language", language);
    }
    String theme = (String) session.getAttribute("theme");
    if (theme == null) {
        theme = "light";
        session.setAttribute("theme", theme);
    }
    RoomType roomType = (RoomType) request.getAttribute("roomType");
    String error = (String) request.getAttribute("error");
    String message = request.getParameter("message");
    if (roomType == null) {
        response.sendRedirect(request.getContextPath() + "/admin/room-types?error=type_not_found");
        return;
    }
    String uploadPath = application.getRealPath("") + File.separator + "assets/images";
%>
<!DOCTYPE html>
<html lang="<%= language %>">
<head>
    <meta charset="UTF-8">
    <title><%= language.equals("vi") ? "Sửa loại phòng - Khách sạn Oceanic" : "Edit Room Type - Oceanic Hotel" %></title>
    <link rel="icon" href="<%= request.getContextPath() %>/assets/images/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="<%= request.getContextPath() %>/assets/css/main.css">
    <link rel="stylesheet" href="<%= request.getContextPath() %>/assets/css/form.css">
    <link rel="stylesheet" href="<%= request.getContextPath() %>/assets/css/modal.css">
    <link rel="stylesheet" href="<%= request.getContextPath() %>/assets/css/edit_room_type.css">
</head>
<body class="<%= theme.equals("dark") ? "dark-mode" : "" %>" data-theme="<%= theme %>">
<div class="admin-container">
    <nav class="sidebar">
        <div class="sidebar-header">
            <a style="color: white; margin-bottom: 20px; font-size: 24px; font-weight: 600; letter-spacing: 0.5px;" href="<%= request.getContextPath() %>/admin/dashboard">Oceanic Hotel</a>
        </div>
        <ul>
            <li><a href="<%= request.getContextPath() %>/admin/dashboard"><%= language.equals("vi") ? "Tổng quan" : "Dashboard" %></a></li>
            <li><a href="<%= request.getContextPath() %>/admin/users"><%= language.equals("vi") ? "Quản lý người dùng" : "User Management" %></a></li>
            <li class="active"><a href="<%= request.getContextPath() %>/admin/room-types"><%= language.equals("vi") ? "Quản lý loại phòng" : "Room Type Management" %></a></li>
            <li><a href="<%= request.getContextPath() %>/admin/rooms"><%= language.equals("vi") ? "Quản lý phòng" : "Room Management" %></a></li>
            <li><a href="<%= request.getContextPath() %>/admin/bookings"><%= language.equals("vi") ? "Quản lý đặt phòng" : "Booking Management" %></a></li>
            <li><a href="<%= request.getContextPath() %>/admin/transactions"><%= language.equals("vi") ? "Quản lý giao dịch" : "Transaction Management" %></a></li>
            <li><a href="<%= request.getContextPath() %>/admin/settings"><%= language.equals("vi") ? "Cấu hình hệ thống" : "System Settings" %></a></li>
            <li><a href="<%= request.getContextPath() %>/admin/reports"><%= language.equals("vi") ? "Báo cáo" : "Reports" %></a></li>
            <li><a href="<%= request.getContextPath() %>/logout"><%= language.equals("vi") ? "Đăng xuất" : "Logout" %></a></li>
        </ul>
    </nav>
    <div class="main-content">
        <!-- Update Room Type Form -->
        <form action="<%= request.getContextPath() %>/admin/room-types/update" method="POST">
            <input type="hidden" name="typeId" value="<%= roomType.getTypeId() %>">
            <div class="form-group">
                <label for="typeName"><%= language.equals("vi") ? "Tên loại phòng" : "Type Name" %></label>
                <input type="text" id="typeName" name="typeName" value="<%= roomType.getTypeName() %>" required>
            </div>
            <div class="form-group">
                <label for="defaultPrice"><%= language.equals("vi") ? "Giá mặc định mỗi đêm" : "Default Price per Night" %></label>
                <input type="number" id="defaultPrice" name="defaultPrice" step="0.01" value="<%= roomType.getDefaultPrice() %>" required>
            </div>
            <div class="form-group">
                <label for="maxAdults"><%= language.equals("vi") ? "Số người lớn tối đa" : "Max Adults" %></label>
                <input type="number" id="maxAdults" name="maxAdults" min="1" value="<%= roomType.getMaxAdults() %>" required>
            </div>
            <div class="form-group">
                <label for="maxChildren"><%= language.equals("vi") ? "Số trẻ em tối đa" : "Max Children" %></label>
                <input type="number" id="maxChildren" name="maxChildren" min="0" value="<%= roomType.getMaxChildren() %>" required>
            </div>
            <div class="form-group">
                <label for="description"><%= language.equals("vi") ? "Mô tả" : "Description" %></label>
                <textarea id="description" name="description"><%= roomType.getDescription() != null ? roomType.getDescription() : "" %></textarea>
            </div>
            <div class="form-buttons">
                <button type="submit" class="action-btn add-btn"><%= language.equals("vi") ? "Cập nhật" : "Update" %></button>
                <a href="<%= request.getContextPath() %>/admin/room-types" class="action-btn cancel-btn"><%= language.equals("vi") ? "Hủy" : "Cancel" %></a>
            </div>
        </form>

        <!-- Current Images -->
        <div class="mt-8">
            <h3><%= language.equals("vi") ? "Hình ảnh hiện tại" : "Current Images" %></h3>
            <div class="image-gallery">
                <% 
                    for (RoomTypeImage image : roomType.getImages()) {
                        File imageFile = new File(uploadPath + File.separator + image.getImageUrl());
                        boolean fileExists = imageFile.exists();
                %>
                <div class="image-item <%= image.isPrimary() ? "primary" : "" %>">
                    <% if (fileExists) { %>
                    <img src="<%= request.getContextPath() %>/assets/images/<%= image.getImageUrl() %>" alt="<%= roomType.getTypeName() %>">
                    <% } else { %>
                    <span style="color: #dc3545; font-size: 12px;"><%= language.equals("vi") ? "Ảnh không tồn tại!" : "Image not found!" %></span>
                    <% } %>
                    <span class="image-status"><%= image.isPrimary() ? (language.equals("vi") ? "Ảnh chính" : "Primary Image") : (language.equals("vi") ? "Ảnh phụ" : "Secondary Image") %></span>
                    <div class="image-actions">
                        <form action="<%= request.getContextPath() %>/admin/room-types/delete-image" method="POST" style="display:inline;">
                            <input type="hidden" name="typeId" value="<%= roomType.getTypeId() %>">
                            <input type="hidden" name="imageId" value="<%= image.getImageId() %>">
                            <button type="submit" class="delete-btn" onclick="return confirm('<%= language.equals("vi") ? "Bạn có chắc chắn muốn xóa ảnh này không?" : "Are you sure you want to delete this image?" %>')"><%= language.equals("vi") ? "Xóa" : "Delete" %></button>
                        </form>
                        <% if (!image.isPrimary() && fileExists) { %>
                        <form action="<%= request.getContextPath() %>/admin/room-types/set-primary" method="POST" style="display:inline;">
                            <input type="hidden" name="typeId" value="<%= roomType.getTypeId() %>">
                            <input type="hidden" name="imageId" value="<%= image.getImageId() %>">
                            <button type="submit" class="primary-btn"><%= language.equals("vi") ? "Đặt làm chính" : "Set as Primary" %></button>
                        </form>
                        <% } %>
                    </div>
                </div>
                <% } %>
            </div>
        </div>

        <!-- Upload New Images -->
        <form action="<%= request.getContextPath() %>/admin/room-types/upload-images" method="POST" enctype="multipart/form-data" class="mt-8">
            <input type="hidden" name="typeId" value="<%= roomType.getTypeId() %>">
            <div class="form-group">
                <label for="images"><%= language.equals("vi") ? "Thêm hình ảnh mới" : "Add New Images" %></label>
                <input type="file" id="images" name="images" accept="image/*" multiple onchange="previewImages(event)" required>
                <div id="preview-container" class="preview-container"></div>
            </div>
            <div class="form-buttons">
                <button type="submit" class="action-btn add-btn"><%= language.equals("vi") ? "Tải lên" : "Upload" %></button>
            </div>
        </form>

        <!-- Success/Error Messages -->
        <% if (message != null) { %>
        <div class="custom-modal" id="successModal" style="display: flex;">
            <div class="modal-content animate-modal">
                <h3><%= language.equals("vi") ? "Thành công" : "Success" %></h3>
                <p><%= message.equals("image_upload_success") ? (language.equals("vi") ? "Ảnh đã được thêm thành công!" : "Images added successfully!") :
                       message.equals("image_deleted") ? (language.equals("vi") ? "Ảnh đã được xóa thành công!" : "Image deleted successfully!") :
                       message.equals("primary_set") ? (language.equals("vi") ? "Ảnh chính đã được cập nhật!" : "Primary image updated!") : "" %></p>
                <div class="modal-buttons">
                    <button class="modal-btn cancel-btn" onclick="document.getElementById('successModal').style.display = 'none'">
                        <%= language.equals("vi") ? "Đóng" : "Close" %>
                    </button>
                </div>
            </div>
        </div>
        <% } %>
        <% if (error != null) { %>
        <div class="custom-modal" id="errorModal" style="display: flex;">
            <div class="modal-content animate-modal">
                <h3><%= language.equals("vi") ? "Lỗi" : "Error" %></h3>
                <p><%= error %></p>
                <div class="modal-buttons">
                    <button class="modal-btn cancel-btn" onclick="document.getElementById('errorModal').style.display = 'none'">
                        <%= language.equals("vi") ? "Đóng" : "Close" %>
                    </button>
                </div>
            </div>
        </div>
        <% } %>
    </div>
</div>

<script>
    function previewImages(event) {
        const previewContainer = document.getElementById('preview-container');
        previewContainer.innerHTML = '';
        const files = event.target.files;
        for (let i = 0; i < files.length; i++) {
            const file = files[i];
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = document.createElement('img');
                img.src = e.target.result;
                previewContainer.appendChild(img);
            };
            reader.readAsDataURL(file);
        }
    }
</script>
</body>
</html>

edit_user.jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="com.mycompany.oceanichotel.models.User" %>
<%
    String language = (String) session.getAttribute("language");
    if (language == null) {
        language = "en";
        session.setAttribute("language", language);
    }
    String theme = (String) session.getAttribute("theme");
    if (theme == null) {
        theme = "light";
        session.setAttribute("theme", theme);
    }
    User user = (User) request.getAttribute("user");
    String error = (String) request.getAttribute("error");
%>
<!DOCTYPE html>
<html lang="<%= language%>">
    <head>
        <meta charset="UTF-8">
        <title><%= language.equals("vi") ? "Sửa người dùng - Khách sạn Oceanic" : "Edit User - Oceanic Hotel"%></title>
        <link rel="icon" href="<%= request.getContextPath()%>/assets/images/logo.png" type="image/x-icon">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/main.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/form.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/modal.css">
    </head>
    <body class="<%= theme.equals("dark") ? "dark-mode" : ""%>" data-theme="<%= theme%>">
        <div class="admin-container">
            <nav class="sidebar">
                <div class="sidebar-header">
                    <a style="color: white; margin-bottom: 20px; font-size: 24px; font-weight: 600; letter-spacing: 0.5px;" href="<%= request.getContextPath()%>/admin/dashboard">Oceanic Hotel
                    </a>
                </div>
                <ul>
                    <li><a href="<%= request.getContextPath()%>/admin/dashboard"><%= language.equals("vi") ? "Tổng quan" : "Dashboard"%></a></li>
                    <li class="active"><a href="<%= request.getContextPath()%>/admin/users"><%= language.equals("vi") ? "Quản lý người dùng" : "User Management"%></a></li>
                    <li ><a href="<%= request.getContextPath()%>/admin/room-types"><%= language.equals("vi") ? "Quản lý loại phòng" : "Room Type Management"%></a></li>

                    <li><a href="<%= request.getContextPath()%>/admin/rooms"><%= language.equals("vi") ? "Quản lý phòng" : "Room Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/bookings"><%= language.equals("vi") ? "Quản lý đặt phòng" : "Booking Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/transactions"><%= language.equals("vi") ? "Quản lý giao dịch" : "Transaction Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/settings"><%= language.equals("vi") ? "Cấu hình hệ thống" : "System Settings"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/reports"><%= language.equals("vi") ? "Báo cáo" : "Reports"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/logout"><%= language.equals("vi") ? "Đăng xuất" : "Logout"%></a></li>
                </ul>
            </nav>
            <div class="main-content">

                <form action="<%= request.getContextPath()%>/admin/users/update" method="POST">
                    <input type="hidden" name="userId" value="<%= user.getUserId()%>">
                    <div class="form-group">
                        <label for="username"><%= language.equals("vi") ? "Tên người dùng" : "Username"%></label>
                        <input type="text" id="username" name="username" value="<%= user.getUsername()%>" required>
                    </div>
                    <div class="form-group">
                        <label for="email"><%= language.equals("vi") ? "Email" : "Email"%></label>
                        <input type="email" id="email" name="email" value="<%= user.getEmail()%>" required>
                    </div>
                    <div class="form-group">
                        <label for="password"><%= language.equals("vi") ? "Mật khẩu mới (để trống nếu không đổi)" : "New Password (leave blank if unchanged)"%></label>
                        <input type="password" id="password" name="password">
                    </div>
                    <div class="form-group">
                        <label for="role"><%= language.equals("vi") ? "Vai trò" : "Role"%></label>
                        <select id="role" name="role" required>
                            <option value="admin" <%= user.getRole().equals("admin") ? "selected" : ""%>><%= language.equals("vi") ? "Quản trị viên" : "admin"%></option>
                            <option value="user" <%= user.getRole().equals("user") ? "selected" : ""%>><%= language.equals("vi") ? "Người dùng" : "user"%></option>
                        </select>
                    </div>
                    <div class="form-buttons">
                        <button type="submit" class="action-btn add-btn"><%= language.equals("vi") ? "Lưu" : "Save"%></button>
                        <a href="<%= request.getContextPath()%>/admin/users" class="action-btn cancel-btn"><%= language.equals("vi") ? "Hủy" : "Cancel"%></a>
                    </div>
                </form>
                <% if (error != null) {%>
                <div class="custom-modal" id="errorModal" style="display: flex;">
                    <div class="modal-content animate-modal">
                        <h3><%= language.equals("vi") ? "Lỗi" : "Error"%></h3>
                        <p><%= error%></p>
                        <div class="modal-buttons">
                            <button class="modal-btn cancel-btn" onclick="document.getElementById('errorModal').style.display = 'none'">
                                <%= language.equals("vi") ? "Đóng" : "Close"%>
                            </button>
                        </div>
                    </div>
                </div>
                <% }%>
            </div>
        </div>
        <script>
            function changeLanguage() {
                const language = document.getElementById('languageSelect').value;
                fetch('<%= request.getContextPath()%>/language', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'language=' + encodeURIComponent(language)
                }).then(() => location.reload());
            }

            function changeTheme() {
                const theme = document.getElementById('themeSelect').value;
                fetch('<%= request.getContextPath()%>/theme', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'theme=' + encodeURIComponent(theme)
                }).then(() => {
                    document.body.className = theme === 'dark' ? 'dark-mode' : '';
                    document.body.setAttribute('data-theme', theme);
                });
            }
        </script>
    </body>
</html>

login_history.jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="java.util.List" %>
<%@ page import="com.mycompany.oceanichotel.models.LoginHistory" %>
<%
    String language = (String) session.getAttribute("language");
    if (language == null) {
        language = "en";
        session.setAttribute("language", language);
    }
    String theme = (String) session.getAttribute("theme");
    if (theme == null) {
        theme = "light";
        session.setAttribute("theme", theme);
    }
    List<LoginHistory> loginHistory = (List<LoginHistory>) request.getAttribute("loginHistory");
    int userId = request.getParameter("userId") != null ? Integer.parseInt(request.getParameter("userId")) : 0;
%>
<!DOCTYPE html>
<html lang="<%= language%>">
    <head>
        <meta charset="UTF-8">
        <title><%= language.equals("vi") ? "Lịch sử đăng nhập - Khách sạn Oceanic" : "Login History - Oceanic Hotel"%></title>
        <link rel="icon" href="<%= request.getContextPath()%>/assets/images/logo.png" type="image/x-icon">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/main.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/sidebar.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/table.css">
        <script>
            window.contextPath = '<%= request.getContextPath()%>';
        </script>
        <script src="<%= request.getContextPath()%>/assets/js/main.js" type="module" defer></script>
        <script src="<%= request.getContextPath()%>/assets/js/theme.js" type="module" defer></script>
        <script src="<%= request.getContextPath()%>/assets/js/language.js" type="module" defer></script>
    </head>
    <body class="<%= theme.equals("dark") ? "dark-mode" : ""%>" data-theme="<%= theme%>">
        <div class="admin-container">
            <nav class="sidebar">
                <div class="sidebar-header">
                    <a style="color: white; margin-bottom: 20px; font-size: 24px; font-weight: 600; letter-spacing: 0.5px;" href="<%= request.getContextPath()%>/admin/dashboard">Oceanic Hotel
                    </a>
                </div>
                <ul>
                    <li><a href="<%= request.getContextPath()%>/admin/dashboard"><%= language.equals("vi") ? "Tổng quan" : "Dashboard"%></a></li>
                    <li class="active"><a href="<%= request.getContextPath()%>/admin/users"><%= language.equals("vi") ? "Quản lý người dùng" : "User Management"%></a></li>
                    <li class="active"><a href="<%= request.getContextPath()%>/admin/room-types"><%= language.equals("vi") ? "Quản lý loại phòng" : "Room Type Management"%></a></li>

                    <li><a href="<%= request.getContextPath()%>/admin/rooms"><%= language.equals("vi") ? "Quản lý phòng" : "Room Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/bookings"><%= language.equals("vi") ? "Quản lý đặt phòng" : "Booking Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/transactions"><%= language.equals("vi") ? "Quản lý giao dịch" : "Transaction Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/settings"><%= language.equals("vi") ? "Cấu hình hệ thống" : "System Settings"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/reports"><%= language.equals("vi") ? "Báo cáo" : "Reports"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/logout"><%= language.equals("vi") ? "Đăng xuất" : "Logout"%></a></li>
                </ul>
            </nav>
            <div class="main-content">
                <div class="table-header">
                    <a href="<%= request.getContextPath()%>/admin/users" class="action-btn back-btn">
                        <%= language.equals("vi") ? "Quay lại" : "Back"%>
                    </a>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th><%= language.equals("vi") ? "ID" : "ID"%></th>
                            <th><%= language.equals("vi") ? "Thời gian đăng nhập" : "Login Time"%></th>
                            <th><%= language.equals("vi") ? "Địa chỉ IP" : "IP Address"%></th>
                        </tr>
                    </thead>
                    <tbody>
                        <%
                            if (loginHistory != null && !loginHistory.isEmpty()) {
                                for (LoginHistory history : loginHistory) {
                        %>
                        <tr>
                            <td><%= history.getLoginId()%></td>
                            <td><%= history.getLoginTime()%></td>
                            <td><%= history.getIpAddress() != null ? history.getIpAddress() : language.equals("vi") ? "Không có" : "N/A"%></td>
                        </tr>
                        <%
                            }
                        } else {
                        %>
                        <tr>
                            <td colspan="3"><%= language.equals("vi") ? "Không có dữ liệu lịch sử đăng nhập" : "No login history available"%></td>
                        </tr>
                        <% }%>
                    </tbody>
                </table>
            </div>
        </div>
    </body>
</html>

reports.jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%
    String language = (String) session.getAttribute("language");
    if (language == null) {
        language = "en";
        session.setAttribute("language", language);
    }
    String theme = (String) session.getAttribute("theme");
    if (theme == null) {
        theme = "light";
        session.setAttribute("theme", theme);
    }
%>
<!DOCTYPE html>
<html lang="<%= language%>">
    <head>
        <meta charset="UTF-8">
        <title><%= language.equals("vi") ? "Báo cáo - Khách sạn Oceanic" : "Reports - Oceanic Hotel"%></title>
        <link rel="icon" href="<%= request.getContextPath()%>/assets/images/logo.png" type="image/x-icon">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/main.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/sidebar.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/table.css">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    </head>
    <body class="<%= theme.equals("dark") ? "dark-mode" : ""%>" data-theme="<%= theme%>">
        <div class="admin-container">
            <nav class="sidebar">
                <div class="sidebar-header">
                    <a style="color: white; margin-bottom: 20px; font-size: 24px; font-weight: 600; letter-spacing: 0.5px;" href="<%= request.getContextPath()%>/admin/dashboard">Oceanic Hotel
                    </a>
                </div>
                <ul>
                    <li><a href="<%= request.getContextPath()%>/admin/dashboard"><%= language.equals("vi") ? "Tổng quan" : "Dashboard"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/users"><%= language.equals("vi") ? "Quản lý người dùng" : "User Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/room-types"><%= language.equals("vi") ? "Quản lý loại phòng" : "Room Type Management"%></a></li>

                    <li><a href="<%= request.getContextPath()%>/admin/rooms"><%= language.equals("vi") ? "Quản lý phòng" : "Room Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/bookings"><%= language.equals("vi") ? "Quản lý đặt phòng" : "Booking Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/transactions"><%= language.equals("vi") ? "Quản lý giao dịch" : "Transaction Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/settings"><%= language.equals("vi") ? "Cấu hình hệ thống" : "System Settings"%></a></li>
                    <li class="active"><a href="<%= request.getContextPath()%>/admin/reports"><%= language.equals("vi") ? "Báo cáo" : "Reports"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/logout"><%= language.equals("vi") ? "Đăng xuất" : "Logout"%></a></li>
                </ul>
            </nav>
            <div class="main-content">
                <div class="filter-section">
                    <form action="<%= request.getContextPath()%>/admin/reports" method="GET">
                        <label><%= language.equals("vi") ? "Loại báo cáo:" : "Report Type:"%></label>
                        <select name="reportType" onchange="this.form.submit()">
                            <option value="daily" <%= "daily".equals(request.getParameter("reportType")) ? "selected" : ""%>><%= language.equals("vi") ? "Hàng ngày" : "Daily"%></option>
                            <option value="monthly" <%= "monthly".equals(request.getParameter("reportType")) ? "selected" : ""%>><%= language.equals("vi") ? "Hàng tháng" : "Monthly"%></option>
                            <option value="yearly" <%= "yearly".equals(request.getParameter("reportType")) ? "selected" : ""%>><%= language.equals("vi") ? "Hàng năm" : "Yearly"%></option>
                        </select>
                        <label><%= language.equals("vi") ? "Ngày bắt đầu:" : "Start Date:"%></label>
                        <input type="date" name="startDate" value="<%= request.getParameter("startDate") != null ? request.getParameter("startDate") : ""%>">
                        <label><%= language.equals("vi") ? "Ngày kết thúc:" : "End Date:"%></label>
                        <input type="date" name="endDate" value="<%= request.getParameter("endDate") != null ? request.getParameter("endDate") : ""%>">
                        <button type="submit"><%= language.equals("vi") ? "Lọc" : "Filter"%></button>
                    </form>
                </div>
                <div class="report-section">
                    <h3><%= language.equals("vi") ? "Doanh thu" : "Revenue"%></h3>
                    <%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
                        <p><%= language.equals("vi") ? "Tổng doanh thu: " : "Total Revenue: "%> <fmt:formatNumber value="<%= request.getAttribute(
                        \"totalRevenue\") %>" type="number" minFractionDigits="0" maxFractionDigits="1"/> VNĐ</p>
                    <div class="chart-container">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>
                <div class="report-section">
                    <h3><%= language.equals("vi") ? "Tỷ lệ sử dụng phòng" : "Room Utilization"%></h3>
                    <p><%= language.equals("vi") ? "Tổng số phòng: " : "Total Rooms: "%> <%= request.getAttribute("totalRooms")%></p>
                    <p><%= language.equals("vi") ? "Phòng trống: " : "Available Rooms: "%> <%= request.getAttribute("availableRooms")%></p>
                    <p><%= language.equals("vi") ? "Đặt phòng đã xác nhận: " : "Confirmed Bookings: "%> <%= request.getAttribute("confirmedBookings")%></p>
                    <p><%= language.equals("vi") ? "Tỷ lệ sử dụng: " : "Utilization Rate: "%> <%= request.getAttribute("utilizationRate")%>%</p>
                    <div class="chart-container">
                        <canvas id="utilizationChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <script>
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            const revenueChart = new Chart(revenueCtx, {
                type: 'bar',
                data: {
                    labels: ['<%= language.equals("vi") ? "Doanh thu" : "Revenue"%>'],
                    datasets: [{
                            label: '<%= language.equals("vi") ? "Tổng doanh thu" : "Total Revenue"%>',
                            data: [<%= request.getAttribute("totalRevenue")%>],
                            backgroundColor: '#007bff',
                            borderColor: '#0056b3',
                            borderWidth: 1
                        }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {y: {beginAtZero: true}},
                    plugins: {legend: {display: false}}
                }
            });

            const utilizationCtx = document.getElementById('utilizationChart').getContext('2d');
            const utilizationChart = new Chart(utilizationCtx, {
                type: 'pie',
                data: {
                    labels: ['<%= language.equals("vi") ? "Phòng đã sử dụng" : "Occupied"%>', '<%= language.equals("vi") ? "Phòng trống" : "Available"%>'],
                    datasets: [{
                            data: [<%= (Integer) request.getAttribute("totalRooms") - (Integer) request.getAttribute("availableRooms")%>, <%= request.getAttribute("availableRooms")%>],
                            backgroundColor: ['#dc3545', '#28a745'],
                            borderColor: ['#fff', '#fff'],
                            borderWidth: 1
                        }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {legend: {position: 'top'}}
                }
            });

            function changeLanguage() {
                const language = document.getElementById('languageSelect').value;
                fetch('<%= request.getContextPath()%>/language', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'language=' + encodeURIComponent(language)
                }).then(() => location.reload());
            }

            function changeTheme() {
                const theme = document.getElementById('themeSelect').value;
                fetch('<%= request.getContextPath()%>/theme', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'theme=' + encodeURIComponent(theme)
                }).then(() => {
                    document.body.className = theme === 'dark' ? 'dark-mode' : '';
                    document.body.setAttribute('data-theme', theme);
                });
            }
        </script>
    </body>
</html>

room_types.jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="java.util.List" %>
<%@ page import="com.mycompany.oceanichotel.models.RoomType" %>
<%
    String language = (String) session.getAttribute("language");
    if (language == null) {
        language = "en";
        session.setAttribute("language", language);
    }
    String theme = (String) session.getAttribute("theme");
    if (theme == null) {
        theme = "light";
        session.setAttribute("theme", theme);
    }
%>
<!DOCTYPE html>
<html lang="<%= language%>">
    <head>
        <meta charset="UTF-8">
        <title><%= language.equals("vi") ? "Quản lý loại phòng - Khách sạn Oceanic" : "Room Type Management - Oceanic Hotel"%></title>
        <link rel="icon" href="<%= request.getContextPath()%>/assets/images/logo.png" type="image/x-icon">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/main.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/table.css">
    </head>
    <body class="<%= theme.equals("dark") ? "dark-mode" : ""%>" data-theme="<%= theme%>">
        <div class="admin-container">
            <nav class="sidebar">
                <div class="sidebar-header">
                    <a style="color: white; margin-bottom: 20px; font-size: 24px; font-weight: 600; letter-spacing: 0.5px;" href="<%= request.getContextPath()%>/admin/dashboard">Oceanic Hotel</a>
                </div>
                <ul>
                    <li><a href="<%= request.getContextPath()%>/admin/dashboard"><%= language.equals("vi") ? "Tổng quan" : "Dashboard"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/users"><%= language.equals("vi") ? "Quản lý người dùng" : "User Management"%></a></li>
                    <li class="active"><a href="<%= request.getContextPath()%>/admin/room-types"><%= language.equals("vi") ? "Quản lý loại phòng" : "Room Type Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/rooms"><%= language.equals("vi") ? "Quản lý phòng" : "Room Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/bookings"><%= language.equals("vi") ? "Quản lý đặt phòng" : "Booking Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/transactions"><%= language.equals("vi") ? "Quản lý giao dịch" : "Transaction Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/settings"><%= language.equals("vi") ? "Cấu hình hệ thống" : "System Settings"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/reports"><%= language.equals("vi") ? "Báo cáo" : "Reports"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/logout"><%= language.equals("vi") ? "Đăng xuất" : "Logout"%></a></li>
                </ul>
            </nav>
            <div class="main-content">
                <div class="table-header">
                    <div class="add-room-type">
                        <button class="action-btn add-btn" onclick="window.location.href = '<%= request.getContextPath()%>/admin/room-types/add'">
                            <%= language.equals("vi") ? "Thêm loại phòng" : "Add Room Type"%>
                        </button>
                    </div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th><%= language.equals("vi") ? "ID" : "ID"%></th>
                            <th><%= language.equals("vi") ? "Tên loại phòng" : "Type Name"%></th>
                            <th><%= language.equals("vi") ? "Giá mặc định" : "Default Price"%></th>
                            <th><%= language.equals("vi") ? "Số người lớn tối đa" : "Max Adults"%></th>
                            <th><%= language.equals("vi") ? "Số trẻ em tối đa" : "Max Children"%></th>
                            <th><%= language.equals("vi") ? "Hình ảnh chính" : "Primary Image"%></th>
                            <th><%= language.equals("vi") ? "Mô tả" : "Description"%></th>
                            <th><%= language.equals("vi") ? "Ngày tạo" : "Created At"%></th>
                            <th>...</th>
                        </tr>
                    </thead>
                    <tbody>
                        <%
                            List<RoomType> roomTypes = (List<RoomType>) request.getAttribute("roomTypes");
                            if (roomTypes != null) {
                                for (RoomType roomType : roomTypes) {
                        %>
                        <tr>
                            <td><%= roomType.getTypeId()%></td>
                            <td><%= roomType.getTypeName()%></td>
                            <%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
                            <td><fmt:formatNumber value="<%= roomType.getDefaultPrice()%>" type="number" minFractionDigits="0" maxFractionDigits="2"/> VND</td>
                            <td><%= roomType.getMaxAdults()%></td>
                            <td><%= roomType.getMaxChildren()%></td>
                            <td>
                                <% if (roomType.getPrimaryImage() != null) {%>
                                <img src="<%= request.getContextPath()%>/assets/images/<%= roomType.getPrimaryImage().getImageUrl()%>" alt="<%= roomType.getTypeName()%>" style="width: 50px; height: 50px;">
                                <% } else { %>
                                N/A
                                <% }%>
                            </td>
                            <td><%= roomType.getDescription() != null ? roomType.getDescription() : "N/A"%></td>
                            <td><%= roomType.getCreatedAt()%></td>
                            <td>
                                <div class="dropdown">
                                    <button class="dropdown-btn">⋮</button>
                                    <div class="dropdown-content">
                                        <a href="<%= request.getContextPath()%>/admin/room-types/edit?typeId=<%= roomType.getTypeId()%>">
                                            <%= language.equals("vi") ? "Sửa" : "Edit"%>
                                        </a>
                                        <a href="javascript:void(0)" onclick="confirmDelete('<%= roomType.getTypeId()%>')">
                                            <%= language.equals("vi") ? "Xóa" : "Delete"%>
                                        </a>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <% }
                        }%>
                    </tbody>
                </table>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                document.querySelectorAll('.dropdown-btn').forEach(btn => {
                    btn.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        const dropdownContent = this.nextElementSibling;
                        const isVisible = dropdownContent.style.display === 'block';
                        document.querySelectorAll('.dropdown-content').forEach(content => content.style.display = 'none');
                        dropdownContent.style.display = isVisible ? 'none' : 'block';
                    });
                });
                document.addEventListener('click', function (e) {
                    if (!e.target.closest('.dropdown')) {
                        document.querySelectorAll('.dropdown-content').forEach(content => content.style.display = 'none');
                    }
                });
            });

            function confirmDelete(typeId) {
                const lang = '<%= language%>';
                const message = lang === 'vi' ? 'Bạn có chắc chắn muốn xóa loại phòng này không?' : 'Are you sure you want to delete this room type?';
                if (confirm(message)) {
                    const form = document.createElement('form');
                    form.method = 'POST';
                    form.action = '<%= request.getContextPath()%>/admin/room-types/delete';
                    const input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = 'typeId';
                    input.value = typeId;
                    form.appendChild(input);
                    document.body.appendChild(form);
                    form.submit();
                }
            }
        </script>
    </body>
</html>

rooms.jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="java.util.List" %>
<%@ page import="com.mycompany.oceanichotel.models.Room" %>
<%
    String language = (String) session.getAttribute("language");
    if (language == null) {
        language = "en";
        session.setAttribute("language", language);
    }
    String theme = (String) session.getAttribute("theme");
    if (theme == null) {
        theme = "light";
        session.setAttribute("theme", theme);
    }
    int currentPage = request.getAttribute("currentPage") != null ? (Integer) request.getAttribute("currentPage") : 1;
    int totalPages = request.getAttribute("totalPages") != null ? (Integer) request.getAttribute("totalPages") : 1;
%>
<!DOCTYPE html>
<html lang="<%= language%>">
    <head>
        <meta charset="UTF-8">
        <title><%= language.equals("vi") ? "Quản lý phòng - Khách sạn Oceanic" : "Room Management - Oceanic Hotel"%></title>
        <link rel="icon" href="<%= request.getContextPath()%>/assets/images/logo.png" type="image/x-icon">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/main.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/sidebar.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/table.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/modal.css">

    </head>
    <body class="<%= theme.equals("dark") ? "dark-mode" : ""%>" data-theme="<%= theme%>">
        <div class="admin-container">
            <nav class="sidebar">
                <div class="sidebar-header"><a style="color: white; margin-bottom: 20px; font-size: 24px; font-weight: 600; letter-spacing: 0.5px;" href="<%= request.getContextPath()%>/admin/dashboard">Oceanic Hotel</a></div>
                <ul>
                    <li><a href="<%= request.getContextPath()%>/admin/dashboard"><%= language.equals("vi") ? "Tổng quan" : "Dashboard"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/users"><%= language.equals("vi") ? "Quản lý người dùng" : "User Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/room-types"><%= language.equals("vi") ? "Quản lý loại phòng" : "Room Type Management"%></a></li>
                    <li class="active"><a href="<%= request.getContextPath()%>/admin/rooms" class="active"><%= language.equals("vi") ? "Quản lý phòng" : "Room Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/bookings"><%= language.equals("vi") ? "Quản lý đặt phòng" : "Booking Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/transactions"><%= language.equals("vi") ? "Quản lý giao dịch" : "Transaction Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/settings"><%= language.equals("vi") ? "Cấu hình hệ thống" : "System Settings"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/reports"><%= language.equals("vi") ? "Báo cáo" : "Reports"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/logout"><%= language.equals("vi") ? "Đăng xuất" : "Logout"%></a></li>
                </ul>
            </nav>
            <div class="main-content">

                <div class="table-header">
                    <div class="add-room">
                        <button class="action-btn add-btn" onclick="window.location.href = '<%= request.getContextPath()%>/admin/rooms/add'">
                            <%= language.equals("vi") ? "Thêm phòng" : "Add Room"%>
                        </button>
                    </div>
                    <div class="search">
                        <form action="<%= request.getContextPath()%>/admin/rooms" method="GET">
                            <input type="text" name="search" placeholder="<%= language.equals("vi") ? "Tìm kiếm theo số phòng" : "Search by room number"%>"
                                   value="<%= request.getParameter("search") != null ? request.getParameter("search") : ""%>">
                            <button type="submit" style="display: none;"></button>
                        </form>
                    </div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th><%= language.equals("vi") ? "ID" : "ID"%></th>
                            <th><%= language.equals("vi") ? "Số phòng" : "Room Number"%></th>
                            <th><%= language.equals("vi") ? "Loại phòng" : "Room Type"%></th>
                            <th><%= language.equals("vi") ? "Giá mỗi đêm" : "Price/Night"%></th>
                            <!--<th><%= language.equals("vi") ? "Hình ảnh" : "Image"%></th>-->
                            <th><%= language.equals("vi") ? "Số người lớn tối đa" : "Max Adults"%></th>
                            <th><%= language.equals("vi") ? "Số trẻ em tối đa" : "Max Children"%></th>
                            <th><%= language.equals("vi") ? "Trạng thái" : "Status"%></th>
                            <!--<th><%= language.equals("vi") ? "Ngày tạo" : "Created At"%></th>-->
                            <th> </th>
                        </tr>
                    </thead>
                    <tbody>
                        <%
                            List<Room> rooms = (List<Room>) request.getAttribute("rooms");
                            if (rooms != null) {
                                for (Room room : rooms) {
                        %>
                        <tr>
                            <td><%= room.getRoomId()%></td>
                            <td><%= room.getRoomNumber()%></td>
                            <td><%= room.getRoomType() != null ? room.getRoomType().getTypeName() : "N/A"%></td>
                            <%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
                            <td><fmt:formatNumber value="<%= room.getPricePerNight()%>" type="number" minFractionDigits="0" maxFractionDigits="2"/> VNĐ</td>

                    <td><%= room.getMaxAdults()%></td>
                    <td><%= room.getMaxChildren()%></td>
                    <td>
                        <span class="status <%= room.isAvailable() ? "clean" : "dirty"%>">
                            <%= room.isAvailable() ? (language.equals("vi") ? "Trống" : "Available") : (language.equals("vi") ? "Đã đặt" : "Occupied")%>
                        </span>
                    </td>
                    <!--<td>
                    <%--<%= room.getCreatedAt()%>--%>
                    <!--</td>-->
                    <td>
                        <div class="dropdown">
                            <button class="dropdown-btn">⋮</button>
                            <div class="dropdown-content">
                                <a href="<%= request.getContextPath()%>/admin/rooms/edit?roomId=<%= room.getRoomId()%>">
                                    <%= language.equals("vi") ? "Sửa thông tin" : "Edit Room"%>
                                </a>
                                <a href="javascript:void(0)" onclick="confirmDelete('<%= room.getRoomId()%>')">
                                    <%= language.equals("vi") ? "Xóa phòng" : "Delete Room"%>
                                </a>
                                <a href="<%= request.getContextPath()%>/admin/rooms/edit-history?roomId=<%= room.getRoomId()%>">
                                    <%= language.equals("vi") ? "Xem lịch sử chỉnh sửa" : "View Edit History"%>
                                </a>
                            </div>
                        </div>
                    </td>
                    </tr>
                    <%
                            }
                        }
                    %>
                    </tbody>
                </table>
                <% if (totalPages > 1) { %>
                <div class="pagination">
                    <% if (currentPage > 1) {%>
                    <a href="<%= request.getContextPath()%>/admin/rooms?page=<%= currentPage - 1%><%= request.getParameter("search") != null ? "&search=" + request.getParameter("search") : ""%>">
                        <button class="page-btn">Previous</button>
                    </a>
                    <% } %>
                    <% for (int i = 1; i <= totalPages; i++) {%>
                    <a href="<%= request.getContextPath()%>/admin/rooms?page=<%= i%><%= request.getParameter("search") != null ? "&search=" + request.getParameter("search") : ""%>">
                        <button class="page-btn <%= currentPage == i ? "active" : ""%>"><%= i%></button>
                    </a>
                    <% } %>
                    <% if (currentPage < totalPages) {%>
                    <a href="<%= request.getContextPath()%>/admin/rooms?page=<%= currentPage + 1%><%= request.getParameter("search") != null ? "&search=" + request.getParameter("search") : ""%>">
                        <button class="page-btn">Next</button>
                    </a>
                    <% } %>
                </div>
                <% }%>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                document.querySelectorAll('.dropdown-btn').forEach(btn => {
                    btn.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        const dropdownContent = this.nextElementSibling;
                        const isVisible = dropdownContent.style.display === 'block';
                        document.querySelectorAll('.dropdown-content').forEach(content => content.style.display = 'none');
                        dropdownContent.style.display = isVisible ? 'none' : 'block';
                    });
                });
                document.addEventListener('click', function (e) {
                    if (!e.target.closest('.dropdown')) {
                        document.querySelectorAll('.dropdown-content').forEach(content => content.style.display = 'none');
                    }
                });
            });

            function confirmDelete(roomId) {
                const lang = '<%= language%>';
                const message = lang === 'vi' ? 'Bạn có chắc chắn muốn xóa phòng này không?' : 'Are you sure you want to delete this room?';
                if (confirm(message)) {
                    const form = document.createElement('form');
                    form.method = 'POST';
                    form.action = '<%= request.getContextPath()%>/admin/rooms/delete';
                    const input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = 'roomId';
                    input.value = roomId;
                    form.appendChild(input);
                    document.body.appendChild(form);
                    form.submit();
                }
            }

            function changeLanguage() {
                const language = document.getElementById('languageSelect').value;
                fetch('<%= request.getContextPath()%>/language', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'language=' + encodeURIComponent(language)
                }).then(() => location.reload());
            }

            function changeTheme() {
                const theme = document.getElementById('themeSelect').value;
                fetch('<%= request.getContextPath()%>/theme', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'theme=' + encodeURIComponent(theme)
                }).then(() => {
                    document.body.className = theme === 'dark' ? 'dark-mode' : '';
                    document.body.setAttribute('data-theme', theme);
                });
            }
        </script>
    </body>
</html>

settings.jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%
    String language = (String) session.getAttribute("language");
    if (language == null) {
        language = "en";
        session.setAttribute("language", language);
    }
    String theme = (String) session.getAttribute("theme");
    if (theme == null) {
        theme = "light";
        session.setAttribute("theme", theme);
    }
    String error = (String) request.getAttribute("error");
%>
<!DOCTYPE html>
<html lang="<%= language%>">
    <head>
        <meta charset="UTF-8">
        <title><%= language.equals("vi") ? "Cấu hình hệ thống - Khách sạn Oceanic" : "System Settings - Oceanic Hotel"%></title>
        <link rel="icon" href="<%= request.getContextPath()%>/assets/images/logo.png" type="image/x-icon">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/main.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/sidebar.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/form.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/modal.css">
    </head>
    <body class="<%= theme.equals("dark") ? "dark-mode" : ""%>" data-theme="<%= theme%>">
        <div class="admin-container">
            <nav class="sidebar">
                <div class="sidebar-header">
                    <a style="color: white; margin-bottom: 20px; font-size: 24px; font-weight: 600; letter-spacing: 0.5px;" href="<%= request.getContextPath()%>/admin/dashboard">Oceanic Hotel
                    </a>
                </div>
                <ul>
                    <li><a href="<%= request.getContextPath()%>/admin/dashboard"><%= language.equals("vi") ? "Tổng quan" : "Dashboard"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/users"><%= language.equals("vi") ? "Quản lý người dùng" : "User Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/room-types"><%= language.equals("vi") ? "Quản lý loại phòng" : "Room Type Management"%></a></li>

                    <li><a href="<%= request.getContextPath()%>/admin/rooms"><%= language.equals("vi") ? "Quản lý phòng" : "Room Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/bookings"><%= language.equals("vi") ? "Quản lý đặt phòng" : "Booking Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/transactions"><%= language.equals("vi") ? "Quản lý giao dịch" : "Transaction Management"%></a></li>
                    <li class="active"><a href="<%= request.getContextPath()%>/admin/settings"><%= language.equals("vi") ? "Cấu hình hệ thống" : "System Settings"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/reports"><%= language.equals("vi") ? "Báo cáo" : "Reports"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/logout"><%= language.equals("vi") ? "Đăng xuất" : "Logout"%></a></li>
                </ul>
            </nav>
            <div class="main-content">

                <form action="<%= request.getContextPath()%>/admin/settings/update" method="POST">
                    <div class="form-group">
                        <label for="defaultLanguage"><%= language.equals("vi") ? "Ngôn ngữ mặc định" : "Default Language"%></label>
                        <select id="defaultLanguage" name="defaultLanguage" required>
                            <option value="en" <%= language.equals("en") ? "selected" : ""%>><%= language.equals("vi") ? "Tiếng Anh" : "English"%></option>
                            <option value="vi" <%= language.equals("vi") ? "selected" : ""%>><%= language.equals("vi") ? "Tiếng Việt" : "Vietnamese"%></option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="defaultTheme"><%= language.equals("vi") ? "Giao diện mặc định" : "Default Theme"%></label>
                        <select id="defaultTheme" name="defaultTheme" required>
                            <option value="light" <%= theme.equals("light") ? "selected" : ""%>><%= language.equals("vi") ? "Chế độ sáng" : "Light Mode"%></option>
                            <option value="dark" <%= theme.equals("dark") ? "selected" : ""%>><%= language.equals("vi") ? "Chế độ tối" : "Dark Mode"%></option>
                        </select>
                    </div>
                    <div class="form-buttons">
                        <button type="submit" class="action-btn add-btn"><%= language.equals("vi") ? "Lưu" : "Save"%></button>
                    </div>
                </form>
                <% if (error != null) {%>
                <div class="custom-modal" id="errorModal" style="display: flex;">
                    <div class="modal-content animate-modal">
                        <h3><%= language.equals("vi") ? "Lỗi" : "Error"%></h3>
                        <p><%= error%></p>
                        <div class="modal-buttons">
                            <button class="modal-btn cancel-btn" onclick="document.getElementById('errorModal').style.display = 'none'">
                                <%= language.equals("vi") ? "Đóng" : "Close"%>
                            </button>
                        </div>
                    </div>
                </div>
                <% }%>
            </div>
        </div>
        <script>
            function changeLanguage() {
                fetch('<%= request.getContextPath()%>/language', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'language=' + encodeURIComponent(document.getElementById('languageSelect').value)
                }).then(() => location.reload());
            }

            function changeTheme() {
                const theme = document.getElementById('themeSelect').value;
                fetch('<%= request.getContextPath()%>/theme', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'theme=' + encodeURIComponent(theme)
                }).then(() => {
                    document.body.className = theme === 'dark' ? 'dark-mode' : '';
                    document.body.setAttribute('data-theme', theme);
                });
            }
        </script>
    </body>
</html>

transactions.jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="java.util.List" %>
<%@ page import="com.mycompany.oceanichotel.models.Transaction" %>
<%
    String language = (String) session.getAttribute("language");
    if (language == null) {
        language = "en";
        session.setAttribute("language", language);
    }
    String theme = (String) session.getAttribute("theme");
    if (theme == null) {
        theme = "light";
        session.setAttribute("theme", theme);
    }
    int currentPage = request.getAttribute("currentPage") != null ? (Integer) request.getAttribute("currentPage") : 1;
    int totalPages = request.getAttribute("totalPages") != null ? (Integer) request.getAttribute("totalPages") : 1;
%>
<!DOCTYPE html>
<html lang="<%= language%>">
    <head>
        <meta charset="UTF-8">
        <title><%= language.equals("vi") ? "Quản lý giao dịch - Khách sạn Oceanic" : "Transaction Management - Oceanic Hotel"%></title>
        <link rel="icon" href="<%= request.getContextPath()%>/assets/images/logo.png" type="image/x-icon">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/main.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/sidebar.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/table.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/modal.css">

    </head>
    <body class="<%= theme.equals("dark") ? "dark-mode" : ""%>" data-theme="<%= theme%>">
        <div class="admin-container">
            <nav class="sidebar">
                <div class="sidebar-header">
                    <a style="color: white; margin-bottom: 20px; font-size: 24px; font-weight: 600; letter-spacing: 0.5px;" href="<%= request.getContextPath()%>/admin/dashboard">Oceanic Hotel
                    </a>
                </div>
                <ul>
                    <li><a href="<%= request.getContextPath()%>/admin/dashboard"><%= language.equals("vi") ? "Tổng quan" : "Dashboard"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/users"><%= language.equals("vi") ? "Quản lý người dùng" : "User Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/room-types"><%= language.equals("vi") ? "Quản lý loại phòng" : "Room Type Management"%></a></li>

                    <li><a href="<%= request.getContextPath()%>/admin/rooms"><%= language.equals("vi") ? "Quản lý phòng" : "Room Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/bookings"><%= language.equals("vi") ? "Quản lý đặt phòng" : "Booking Management"%></a></li>
                    <li class="active"><a href="<%= request.getContextPath()%>/admin/transactions"><%= language.equals("vi") ? "Quản lý giao dịch" : "Transaction Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/settings"><%= language.equals("vi") ? "Cấu hình hệ thống" : "System Settings"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/reports"><%= language.equals("vi") ? "Báo cáo" : "Reports"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/logout"><%= language.equals("vi") ? "Đăng xuất" : "Logout"%></a></li>
                </ul>
            </nav>
            <div class="main-content">

                <div class="stats">
                    <div><%= language.equals("vi") ? "Tổng doanh thu: " : "Total Revenue: "%><%= request.getAttribute("totalRevenue")%></div>
                    <div><%= language.equals("vi") ? "Thành công: " : "Successful: "%><%= request.getAttribute("successfulTransactions")%></div>
                    <div><%= language.equals("vi") ? "Thất bại: " : "Failed: "%><%= request.getAttribute("failedTransactions")%></div>
                </div>
                <div class="table-header">
                    <div class="search">
                        <form action="<%= request.getContextPath()%>/admin/transactions" method="GET">
                            <input type="text" name="search" placeholder="<%= language.equals("vi") ? "Tìm kiếm theo ID giao dịch" : "Search by Transaction ID"%>"
                                   value="<%= request.getParameter("search") != null ? request.getParameter("search") : ""%>">
                            <button type="submit" style="display: none;"></button>
                        </form>
                    </div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th><%= language.equals("vi") ? "ID" : "ID"%></th>
                            <th><%= language.equals("vi") ? "Đặt phòng" : "Booking"%></th>
                            <th><%= language.equals("vi") ? "Số tiền" : "Amount"%></th>
                            <th><%= language.equals("vi") ? "Trạng thái" : "Status"%></th>
                            <th><%= language.equals("vi") ? "Ngày tạo" : "Created At"%></th>
                        </tr>
                    </thead>
                    <tbody>
                        <%
                            List<Transaction> transactions = (List<Transaction>) request.getAttribute("transactions");
                            if (transactions != null) {
                                for (Transaction transaction : transactions) {
                        %>
                        <tr>
                            <td><%= transaction.getTransactionId()%></td>
                            <td><%= transaction.getBookingId()%></td>
                            <td><%= transaction.getAmount()%> VNĐ</td>
                            <td><%= language.equals("vi") ? (transaction.getStatus().equals("Success") ? "Thành công" : "Thất bại") : transaction.getStatus()%></td>
                            <td><%= transaction.getCreatedAt()%></td>
                        </tr>
                        <%
                                }
                            }
                        %>
                    </tbody>
                </table>
                <% if (totalPages > 1) { %>
                <div class="pagination">
                    <% if (currentPage > 1) {%>
                    <a href="<%= request.getContextPath()%>/admin/transactions?page=<%= currentPage - 1%><%= request.getParameter("search") != null ? "&search=" + request.getParameter("search") : ""%>">
                        <button class="page-btn">Previous</button>
                    </a>
                    <% } %>
                    <% for (int i = 1; i <= totalPages; i++) {%>
                    <a href="<%= request.getContextPath()%>/admin/transactions?page=<%= i%><%= request.getParameter("search") != null ? "&search=" + request.getParameter("search") : ""%>">
                        <button class="page-btn <%= currentPage == i ? "active" : ""%>"><%= i%></button>
                    </a>
                    <% } %>
                    <% if (currentPage < totalPages) {%>
                    <a href="<%= request.getContextPath()%>/admin/transactions?page=<%= currentPage + 1%><%= request.getParameter("search") != null ? "&search=" + request.getParameter("search") : ""%>">
                        <button class="page-btn">Next</button>
                    </a>
                    <% } %>
                </div>
                <% }%>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                document.querySelectorAll('.dropdown-btn').forEach(btn => {
                    btn.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        const dropdownContent = this.nextElementSibling;
                        const isVisible = dropdownContent.style.display === 'block';
                        document.querySelectorAll('.dropdown-content').forEach(content => content.style.display = 'none');
                        dropdownContent.style.display = isVisible ? 'none' : 'block';
                    });
                });
                document.addEventListener('click', function (e) {
                    if (!e.target.closest('.dropdown')) {
                        document.querySelectorAll('.dropdown-content').forEach(content => content.style.display = 'none');
                    }
                });
            });

            function changeLanguage() {
                fetch('<%= request.getContextPath()%>/language', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'language=' + encodeURIComponent(document.getElementById('languageSelect').value)
                }).then(() => location.reload());
            }

            function changeTheme() {
                const theme = document.getElementById('themeSelect').value;
                fetch('<%= request.getContextPath()%>/theme', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'theme=' + encodeURIComponent(theme)
                }).then(() => {
                    document.body.className = theme === 'dark' ? 'dark-mode' : '';
                    document.body.setAttribute('data-theme', theme);
                });
            }
        </script>
    </body>
</html>

users.jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="java.util.List" %>
<%@ page import="com.mycompany.oceanichotel.models.User" %>
<%
    String language = (String) session.getAttribute("language");
    if (language == null) {
        language = "en";
        session.setAttribute("language", language);
    }
    String theme = (String) session.getAttribute("theme");
    if (theme == null) {
        theme = "light";
        session.setAttribute("theme", theme);
    }

    int currentPage = request.getAttribute("currentPage") != null ? (Integer) request.getAttribute("currentPage") : 1;
    int totalPages = request.getAttribute("totalPages") != null ? (Integer) request.getAttribute("totalPages") : 1;
%>
<!DOCTYPE html>
<html lang="<%= language%>">
    <head>
        <meta charset="UTF-8">
        <title><%= language.equals("vi") ? "Quản lý người dùng - Khách sạn Oceanic" : "User Management - Oceanic Hotel"%></title>
        <link rel="icon" href="<%= request.getContextPath()%>/assets/images/logo.png" type="image/x-icon">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/main.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/sidebar.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/table.css">
        <link rel="stylesheet" href="<%= request.getContextPath()%>/assets/css/modal.css">

    </head>
    <body class="<%= theme.equals("dark") ? "dark-mode" : ""%>" data-theme="<%= theme%>">
        <div class="admin-container">
            <nav class="sidebar">
                <div class="sidebar-header">
                    <a style="color: white; margin-bottom: 20px; font-size: 24px; font-weight: 600; letter-spacing: 0.5px;" href="<%= request.getContextPath()%>/admin/dashboard">Oceanic Hotel
                    </a>
                </div>
                <ul>
                    <li><a href="<%= request.getContextPath()%>/admin/dashboard"><%= language.equals("vi") ? "Tổng quan" : "Dashboard"%></a></li>
                    <li class="active"><a href="<%= request.getContextPath()%>/admin/users"><%= language.equals("vi") ? "Quản lý người dùng" : "User Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/room-types"><%= language.equals("vi") ? "Quản lý loại phòng" : "Room Type Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/rooms"><%= language.equals("vi") ? "Quản lý phòng" : "Room Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/bookings"><%= language.equals("vi") ? "Quản lý đặt phòng" : "Booking Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/transactions"><%= language.equals("vi") ? "Quản lý giao dịch" : "Transaction Management"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/settings"><%= language.equals("vi") ? "Cấu hình hệ thống" : "System Settings"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/admin/reports"><%= language.equals("vi") ? "Báo cáo" : "Reports"%></a></li>
                    <li><a href="<%= request.getContextPath()%>/logout"><%= language.equals("vi") ? "Đăng xuất" : "Logout"%></a></li>
                </ul>
            </nav>
            <div class="main-content">
                <div class="table-header">
                    <div class="add-user">
                        <button class="action-btn add-btn" onclick="window.location.href = '<%= request.getContextPath()%>/admin/users/add'">
                            <%= language.equals("vi") ? "Thêm người dùng" : "Add User"%>
                        </button>
                    </div>
                    <div class="search">
                        <form action="<%= request.getContextPath()%>/admin/users" method="GET">
                            <input type="text" name="search" placeholder="<%= language.equals("vi") ? "Tìm kiếm theo tên người dùng" : "Search by username"%>"
                                   value="<%= request.getParameter("search") != null ? request.getParameter("search") : ""%>">
                            <button type="submit" style="display: none;"></button>
                        </form>
                    </div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th><%= language.equals("vi") ? "ID" : "ID"%></th>
                            <th><%= language.equals("vi") ? "Tên người dùng" : "Username"%></th>
                            <th><%= language.equals("vi") ? "Email" : "Email"%></th>
                            <th><%= language.equals("vi") ? "Vai trò" : "Role"%></th>
                            <th><%= language.equals("vi") ? "Ngày tạo" : "Created At"%></th>
                            <th></th>

                        </tr>
                    </thead>
                    <tbody>
                        <%
                            List<User> users = (List<User>) request.getAttribute("users");
                            if (users != null) {
                                for (User user : users) {
                        %>
                        <tr>
                            <td><%= user.getUserId()%></td>
                            <td><%= user.getUsername()%></td>
                            <td><%= user.getEmail()%></td>
                            <td><%= user.getRole()%></td>
                            <td><%= user.getCreatedAt()%></td>
                            <td>
                                <div class="dropdown">
                                    <button class="dropdown-btn">⋮</button>
                                    <div class="dropdown-content">
                                        <a href="<%= request.getContextPath()%>/admin/users/edit?userId=<%= user.getUserId()%>">
                                            <%= language.equals("vi") ? "Sửa thông tin" : "Edit User"%>
                                        </a>
                                        <a href="javascript:void(0)" onclick="confirmDelete('<%= user.getUserId()%>')">
                                            <%= language.equals("vi") ? "Xóa người dùng" : "Delete User"%>
                                        </a>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <%
                                }
                            }
                        %>
                    </tbody>
                </table>
                <% if (totalPages > 1) { %>
                <div class="pagination">
                    <% if (currentPage > 1) {%>
                    <a href="<%= request.getContextPath()%>/admin/users?page=<%= currentPage - 1%><%= request.getParameter("search") != null ? "&search=" + request.getParameter("search") : ""%>">
                        <button class="page-btn">Previous</button>
                    </a>
                    <% } %>
                    <% for (int i = 1; i <= totalPages; i++) {%>
                    <a href="<%= request.getContextPath()%>/admin/users?page=<%= i%><%= request.getParameter("search") != null ? "&search=" + request.getParameter("search") : ""%>">
                        <button class="page-btn <%= currentPage == i ? "active" : ""%>"><%= i%></button>
                    </a>
                    <% } %>
                    <% if (currentPage < totalPages) {%>
                    <a href="<%= request.getContextPath()%>/admin/users?page=<%= currentPage + 1%><%= request.getParameter("search") != null ? "&search=" + request.getParameter("search") : ""%>">
                        <button class="page-btn">Next</button>
                    </a>
                    <% } %>
                </div>
                <% }%>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                document.querySelectorAll('.dropdown-btn').forEach(btn => {
                    btn.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        const dropdownContent = this.nextElementSibling;
                        const isVisible = dropdownContent.style.display === 'block';
                        document.querySelectorAll('.dropdown-content').forEach(content => {
                            content.style.display = 'none';
                        });
                        dropdownContent.style.display = isVisible ? 'none' : 'block';
                    });
                });

                document.addEventListener('click', function (e) {
                    if (!e.target.closest('.dropdown')) {
                        document.querySelectorAll('.dropdown-content').forEach(content => {
                            content.style.display = 'none';
                        });
                    }
                });
            });

            function confirmDelete(userId) {
                const lang = '<%= language%>';
                const message = lang === 'vi' ? 'Bạn có chắc chắn muốn xóa người dùng này không?' : 'Are you sure you want to delete this user?';
                if (confirm(message)) {
                    const form = document.createElement('form');
                    form.method = 'POST';
                    form.action = '<%= request.getContextPath()%>/admin/users/delete';
                    const input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = 'userId';
                    input.value = userId;
                    form.appendChild(input);
                    document.body.appendChild(form);
                    form.submit();
                }
            }

            function changeLanguage() {
                const language = document.getElementById('languageSelect').value;
                fetch('<%= request.getContextPath()%>/language', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'language=' + encodeURIComponent(language)
                }).then(() => location.reload());
            }

            function changeTheme() {
                const theme = document.getElementById('themeSelect').value;
                fetch('<%= request.getContextPath()%>/theme', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: 'theme=' + encodeURIComponent(theme)
                }).then(() => {
                    document.body.className = theme === 'dark' ? 'dark-mode' : '';
                    document.body.setAttribute('data-theme', theme);
                });
            }
        </script>
    </body>
</html>